import{y as Q,g as V,F as W,G as B,A as F,H as Y,I as H,J as G,K as y,M as U,O as Z,P as X,Q as N,R as $,T as j,U as ee,z as re,V as ae,W as R,X as ne,Y as ie,Z as le,_ as J,$ as fe}from"./runtime-CdPt_9rh.js";import{q as ue}from"./props-D-EHSMr3.js";let te=!1;function ve(l,e,r,t){for(var s=[],d=e.length,_=0;_<d;_++)$(e[_].e,s,!0);var c=d>0&&s.length===0&&r!==null;if(c){var h=r.parentNode;j(h),h.append(r),t.clear(),I(l,e[0].prev,e[d-1].next)}ee(s,()=>{for(var o=0;o<d;o++){var v=e[o];c||(t.delete(v.k),I(l,v.prev,v.next)),re(v.e,!c)}})}function he(l,e,r,t,s,d=null){var _=l,c={flags:e,items:new Map,first:null},h=(e&J)!==0;if(h){var o=l;_=o.appendChild(le())}var v=null,x=!1,n=W(()=>{var u=r();return ie(u)?u:u==null?[]:G(u)});Q(()=>{var u=V(n),a=u.length;x&&a===0||(x=a===0,se(u,c,_,s,e,t,r),d!==null&&(a===0?v?B(v):v=F(()=>d(_)):v!==null&&Y(v,()=>{v=null})),V(n))})}function se(l,e,r,t,s,d,_){var b,q,D,L;var c=(s&fe)!==0,h=(s&(R|N))!==0,o=l.length,v=e.items,x=e.first,n=x,u,a=null,g,p=[],E=[],C,m,i,f;if(c)for(f=0;f<o;f+=1)C=l[f],m=d(C,f),i=v.get(m),i!==void 0&&((b=i.a)==null||b.measure(),(g??(g=new Set)).add(i));for(f=0;f<o;f+=1){if(C=l[f],m=d(C,f),i=v.get(m),i===void 0){var K=n?n.e.nodes_start:r;a=_e(K,e,a,a===null?e.first:a.next,C,m,f,t,s,_),v.set(m,a),p=[],E=[],n=a.next;continue}if(h&&de(i,C,f,s),(i.e.f&H)!==0&&(B(i.e),c&&((q=i.a)==null||q.unfix(),(g??(g=new Set)).delete(i))),i!==n){if(u!==void 0&&u.has(i)){if(p.length<E.length){var w=E[0],A;a=w.prev;var S=p[0],M=p[p.length-1];for(A=0;A<p.length;A+=1)z(p[A],w,r);for(A=0;A<E.length;A+=1)u.delete(E[A]);I(e,S.prev,M.next),I(e,a,S),I(e,M,w),n=w,a=M,f-=1,p=[],E=[]}else u.delete(i),z(i,n,r),I(e,i.prev,i.next),I(e,i,a===null?e.first:a.next),I(e,a,i),a=i;continue}for(p=[],E=[];n!==null&&n.k!==m;)(n.e.f&H)===0&&(u??(u=new Set)).add(n),E.push(n),n=n.next;if(n===null)continue;i=n}p.push(i),a=i,n=i.next}if(n!==null||u!==void 0){for(var T=u===void 0?[]:G(u);n!==null;)(n.e.f&H)===0&&T.push(n),n=n.next;var k=T.length;if(k>0){var P=(s&J)!==0&&o===0?r:null;if(c){for(f=0;f<k;f+=1)(D=T[f].a)==null||D.measure();for(f=0;f<k;f+=1)(L=T[f].a)==null||L.fix()}ve(e,T,P,v)}}c&&ue(()=>{var O;if(g!==void 0)for(i of g)(O=i.a)==null||O.apply()}),y.first=e.first&&e.first.e,y.last=a&&a.e}function de(l,e,r,t){(t&R)!==0&&U(l.v,e),(t&N)!==0?U(l.i,r):l.i=r}function _e(l,e,r,t,s,d,_,c,h,o){var v=(h&R)!==0,x=(h&ne)===0,n=v?x?Z(s):X(s):s,u=(h&N)===0?_:X(_),a={i:u,v:n,k:d,a:null,e:null,prev:r,next:t};try{return a.e=F(()=>c(l,n,u,o),te),a.e.prev=r&&r.e,a.e.next=t&&t.e,r===null?e.first=a:(r.next=a,r.e.next=a.e),t!==null&&(t.prev=a,t.e.prev=a.e),a}finally{}}function z(l,e,r){for(var t=l.next?l.next.e.nodes_start:r,s=e?e.e.nodes_start:r,d=l.e.nodes_start;d!==t;){var _=ae(d);s.before(d),d=_}}function I(l,e,r){e===null?l.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}export{he as e};
