import{o as X,q as W,k as y,v as Y,w as G,x as J,y as Z,I as H,z as K,B,C as V,D as $,E as z,F as N,G as j,H as ee,J as re,K as ae,M as ne,O as R,P as ie,Q as le,R as P,T as fe}from"./context-BFm1olXO.js";import{q as ue}from"./props-AgMr7LvY.js";let ve=!1;function te(l,e,r,v){for(var s=[],d=e.length,_=0;_<d;_++)j(e[_].e,s,!0);var o=d>0&&s.length===0&&r!==null;if(o){var h=r.parentNode;ee(h),h.append(r),v.clear(),m(l,e[0].prev,e[d-1].next)}re(s,()=>{for(var c=0;c<d;c++){var t=e[c];o||(v.delete(t.k),m(l,t.prev,t.next)),ae(t.e,!o)}})}function he(l,e,r,v,s,d=null){var _=l,o={flags:e,items:new Map,first:null},h=(e&P)!==0;if(h){var c=l;_=c.appendChild(X())}var t=null,A=!1,n=Y(()=>{var u=r();return le(u)?u:u==null?[]:K(u)});W(()=>{var u=y(n),a=u.length;A&&a===0||(A=a===0,se(u,o,_,s,e,v,r),d!==null&&(a===0?t?G(t):t=J(()=>d(_)):t!==null&&Z(t,()=>{t=null})),y(n))})}function se(l,e,r,v,s,d,_){var b,q,D,L;var o=(s&fe)!==0,h=(s&(R|N))!==0,c=l.length,t=e.items,A=e.first,n=A,u,a=null,T,p=[],E=[],C,x,i,f;if(o)for(f=0;f<c;f+=1)C=l[f],x=d(C,f),i=t.get(x),i!==void 0&&((b=i.a)==null||b.measure(),(T??(T=new Set)).add(i));for(f=0;f<c;f+=1){if(C=l[f],x=d(C,f),i=t.get(x),i===void 0){var Q=n?n.e.nodes_start:r;a=_e(Q,e,a,a===null?e.first:a.next,C,x,f,v,s,_),t.set(x,a),p=[],E=[],n=a.next;continue}if(h&&de(i,C,f,s),(i.e.f&H)!==0&&(G(i.e),o&&((q=i.a)==null||q.unfix(),(T??(T=new Set)).delete(i))),i!==n){if(u!==void 0&&u.has(i)){if(p.length<E.length){var g=E[0],I;a=g.prev;var S=p[0],k=p[p.length-1];for(I=0;I<p.length;I+=1)F(p[I],g,r);for(I=0;I<E.length;I+=1)u.delete(E[I]);m(e,S.prev,k.next),m(e,a,S),m(e,k,g),n=g,a=k,f-=1,p=[],E=[]}else u.delete(i),F(i,n,r),m(e,i.prev,i.next),m(e,i,a===null?e.first:a.next),m(e,a,i),a=i;continue}for(p=[],E=[];n!==null&&n.k!==x;)(n.e.f&H)===0&&(u??(u=new Set)).add(n),E.push(n),n=n.next;if(n===null)continue;i=n}p.push(i),a=i,n=i.next}if(n!==null||u!==void 0){for(var w=u===void 0?[]:K(u);n!==null;)(n.e.f&H)===0&&w.push(n),n=n.next;var M=w.length;if(M>0){var U=(s&P)!==0&&c===0?r:null;if(o){for(f=0;f<M;f+=1)(D=w[f].a)==null||D.measure();for(f=0;f<M;f+=1)(L=w[f].a)==null||L.fix()}te(e,w,U,t)}}o&&ue(()=>{var O;if(T!==void 0)for(i of T)(O=i.a)==null||O.apply()}),B.first=e.first&&e.first.e,B.last=a&&a.e}function de(l,e,r,v){(v&R)!==0&&V(l.v,e),(v&N)!==0?V(l.i,r):l.i=r}function _e(l,e,r,v,s,d,_,o,h,c){var t=(h&R)!==0,A=(h&ie)===0,n=t?A?$(s):z(s):s,u=(h&N)===0?_:z(_),a={i:u,v:n,k:d,a:null,e:null,prev:r,next:v};try{return a.e=J(()=>o(l,n,u,c),ve),a.e.prev=r&&r.e,a.e.next=v&&v.e,r===null?e.first=a:(r.next=a,r.e.next=a.e),v!==null&&(v.prev=a,v.e.prev=a.e),a}finally{}}function F(l,e,r){for(var v=l.next?l.next.e.nodes_start:r,s=e?e.e.nodes_start:r,d=l.e.nodes_start;d!==v;){var _=ne(d);s.before(d),d=_}}function m(l,e,r){e===null?l.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}export{he as e};
