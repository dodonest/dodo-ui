import{C as W,g as V,D as Y,E as F,F as G,G as Z,I as H,H as J,J as U,K as X,M as $,O as y,P as N,Q as z,R as j,T as ee,U as re,V as ae,W as R,X as ne,Y as ie,Z as le,_ as K,$ as fe}from"./context-Be8SpCvp.js";import{q as ue}from"./props-mKSH39sK.js";let te=!1;function ve(l,e,r,t){for(var s=[],d=e.length,_=0;_<d;_++)z(e[_].e,s,!0);var c=d>0&&s.length===0&&r!==null;if(c){var h=r.parentNode;j(h),h.append(r),t.clear(),m(l,e[0].prev,e[d-1].next)}ee(s,()=>{for(var o=0;o<d;o++){var v=e[o];c||(t.delete(v.k),m(l,v.prev,v.next)),re(v.e,!c)}})}function he(l,e,r,t,s,d=null){var _=l,c={flags:e,items:new Map,first:null},h=(e&K)!==0;if(h){var o=l;_=o.appendChild(le())}var v=null,C=!1,n=Y(()=>{var u=r();return ie(u)?u:u==null?[]:J(u)});W(()=>{var u=V(n),a=u.length;C&&a===0||(C=a===0,se(u,c,_,s,e,t,r),d!==null&&(a===0?v?F(v):v=G(()=>d(_)):v!==null&&Z(v,()=>{v=null})),V(n))})}function se(l,e,r,t,s,d,_){var b,D,q,L;var c=(s&fe)!==0,h=(s&(R|N))!==0,o=l.length,v=e.items,C=e.first,n=C,u,a=null,g,p=[],E=[],x,A,i,f;if(c)for(f=0;f<o;f+=1)x=l[f],A=d(x,f),i=v.get(A),i!==void 0&&((b=i.a)==null||b.measure(),(g??(g=new Set)).add(i));for(f=0;f<o;f+=1){if(x=l[f],A=d(x,f),i=v.get(A),i===void 0){var P=n?n.e.nodes_start:r;a=_e(P,e,a,a===null?e.first:a.next,x,A,f,t,s,_),v.set(A,a),p=[],E=[],n=a.next;continue}if(h&&de(i,x,f,s),(i.e.f&H)!==0&&(F(i.e),c&&((D=i.a)==null||D.unfix(),(g??(g=new Set)).delete(i))),i!==n){if(u!==void 0&&u.has(i)){if(p.length<E.length){var w=E[0],I;a=w.prev;var S=p[0],M=p[p.length-1];for(I=0;I<p.length;I+=1)B(p[I],w,r);for(I=0;I<E.length;I+=1)u.delete(E[I]);m(e,S.prev,M.next),m(e,a,S),m(e,M,w),n=w,a=M,f-=1,p=[],E=[]}else u.delete(i),B(i,n,r),m(e,i.prev,i.next),m(e,i,a===null?e.first:a.next),m(e,a,i),a=i;continue}for(p=[],E=[];n!==null&&n.k!==A;)(n.e.f&H)===0&&(u??(u=new Set)).add(n),E.push(n),n=n.next;if(n===null)continue;i=n}p.push(i),a=i,n=i.next}if(n!==null||u!==void 0){for(var T=u===void 0?[]:J(u);n!==null;)(n.e.f&H)===0&&T.push(n),n=n.next;var k=T.length;if(k>0){var Q=(s&K)!==0&&o===0?r:null;if(c){for(f=0;f<k;f+=1)(q=T[f].a)==null||q.measure();for(f=0;f<k;f+=1)(L=T[f].a)==null||L.fix()}ve(e,T,Q,v)}}c&&ue(()=>{var O;if(g!==void 0)for(i of g)(O=i.a)==null||O.apply()}),U.first=e.first&&e.first.e,U.last=a&&a.e}function de(l,e,r,t){(t&R)!==0&&X(l.v,e),(t&N)!==0?X(l.i,r):l.i=r}function _e(l,e,r,t,s,d,_,c,h,o){var v=(h&R)!==0,C=(h&ne)===0,n=v?C?$(s):y(s):s,u=(h&N)===0?_:y(_),a={i:u,v:n,k:d,a:null,e:null,prev:r,next:t};try{return a.e=G(()=>c(l,n,u,o),te),a.e.prev=r&&r.e,a.e.next=t&&t.e,r===null?e.first=a:(r.next=a,r.e.next=a.e),t!==null&&(t.prev=a,t.e.prev=a.e),a}finally{}}function B(l,e,r){for(var t=l.next?l.next.e.nodes_start:r,s=e?e.e.nodes_start:r,d=l.e.nodes_start;d!==t;){var _=ae(d);s.before(d),d=_}}function m(l,e,r){e===null?l.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}export{he as e};
